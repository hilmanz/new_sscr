<div class="page_section" id="project-page">
    <div id="container">
        <div class="titlebox">
            <h2 class="fl"><span class="icon-books">&nbsp;</span>Add Member</h2>
            <h2 class="fr"><a href="{$basedomain}membermanagement" class="button2">Back</a></h2>
        </div><!-- end .titlebox -->
        <div class="content">

            <form id="forms" class="forms" method="post" action="{$basedomain}membermanagement/addmember">
			
            <div id="new-project" class="boxcontent">
                <section class="step1">	
                    <div class="row">
                        <label for="name">Nama<br></label>
                        <input id="name" name="name"  value="" type="text" class="name" ><br>
						<label class="name_erorr msg_name"  style="color: red;"></label>
                    </div><!-- end .row -->
					<div class="row">
                        <label for="email">Email<br></label>
                        <input name="email" type="text" class="emailMember" ><br>
						<p class="infotext emailmember_erorr msg_name"  style="color: red;"></p>
						
                    </div><!-- end .row -->
					
					<div class="row">
                        <label for="idktp">No Telp<br></label>
                        <input id="no_telp" name="no_tlp" value=""  type="text" class="no_telp" ><br>
						<label class="no_telp_erorr msg_name"  style="color: red;"></label>
                    </div><!-- end .row -->
					<div class="row">
                        <label for="idktp">ID KTP/SIM<br></label>
                        <input id="ktp_sim" name="ktp_sim" value=""  type="text" class="ktp_sim" ><br>
						<label class="ktp_sim_erorr msg_name"  style="color: red;"></label>
                    </div><!-- end .row -->
                    <div class="row">
                        <label for="idktp">Alamat<br></label>
                        <input id="alamat" name="alamat" value=""  type="text" class="alamat" ><br>
						<label class="alamat_erorr msg_name"  style="color: red;"></label>
                    </div><!-- end .row -->
                    
					  
                     <div class="row">
                        <label for="facebookak">Akun Facebook<br></label>
                        <div class="relative rowfesbuk">
                            <span class="fbText">http://www.facebook.com/</span>
                        <input id="akunface" name="fb_id" value="" type="text" class="" ></div><br>
						<label class="msg_name" style="color: red;"></label>
                    </div><!-- end .row -->
                    <div class="row">
                        <label for="twitter">Akun Twitter<br></label>
                        <div class="relative rowtwitter">
                            <span class="tweetText">http://www.twitter.com/</span>
                        <input id="twitter" name="twitter_id" value="" type="text" class="" ></div><br>
						<label class="msg_name" style="color: red;"></label>
                    </div><!-- end .row -->
                    <div class="row">
						<label>Nama Chapter<br></label>
						<select name="chapter_id" class="chapter_id ">					   
							<option value="">Pilih Chapter</option>						 
							{section name=i loop=$listchap}
								<option value="{$listchap[i].id}">{$listchap[i].name_chapter}</option>						
							{/section}					  
						</select><br>						
						<label class="chapter_id_erorr msg_name" style="color: red;"></label>						
					</div><!-- end .row -->
					
                                         
                     
                    <div class="row">
					<input type="submit" class="submitnya" value="Save" name="submit"  style="display:none">
                        <a class="fr button3 submitevent"  />	Submit	</a>			
						 <a href="{$basedomain}membermanagement" class="button4 fr">Cancel</a>
                        
                    </div><!-- end .row -->
				
                </section>
            </div><!-- end #wizard -->
			
			
            </form>
        </div><!-- end .content -->
    </div><!-- end #container -->
</div><!-- end #home -->
<script>
{literal}
	$('.typeuser').click(function()
	{
			
			console.log($(this).val());
			if($(this).val()==9)
			{
				$(".checkboxmenu").prop("checked", true);
				$(".checkboxmenu").attr("disabled", true);				
			}
			else {
				$(".checkboxmenu").prop("checked", false);
				$(".checkboxmenu").removeAttr("disabled"); 	
				}
	});
	/**$('.submitsave').click(function()
		{
			console.log('asa');return false;
			var name_no='.name_no';
			$(name_no).html(' ');
			var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/; 
			var email_no=".email_no";
			$(email_no).html(' ');
			var username_no='.username_no';
			$(username_no).html(' ');
			var password='.password_no';
			$(password_no).html(' ');
			var checkboxmenu='.checkboxmenu_no';
			$(checkboxmenu_no).html(' ');
			var valid='';
			if($('.checkboxmenu:checked').length ==0)
				{
				
					$(subcategory_no).html('You cannot leave this field empty');
					valid='ada';
				}
			if($('.name').val()=='')
			{
				$(name_no).html('You cannot leave this field empty');
				valid='ada';
			}
			if($('.username').val()=='')
			{
				$(username_no).html('You cannot leave this field empty');
				valid='ada';
			}
			if($('.password').val()=='')
			{
				$(password_no).html('You cannot leave this field empty');
				valid='ada';
			}
			if($('.email').val()=='')
			{
				$(email_no).html('You cannot leave this field empty');
				valid='ada';
			}
			else if(!$('.email').val().match(mailformat))  
			{  
				$(email_no).html('format email salah');
				valid='ada';
			} 
			if(valid)
			{
				return false;
			
			}
			else
			{
				$('input[type="submit"]').attr('disabled','disabled');
			
			}
		}**/
		
	$(document).on('click','.submitevent',function(){
		$('.name_erorr').html('');
		$('.email_erorr').html('');
		$('.ktp_sim_erorr').html('');
		$('.alamat_erorr').html('');
		$('.fb_id_erorr').html('');
		$('.twitter_id_erorr').html('');
		$('.date_register_erorr').html('');
		$('.chapter_id_erorr').html('');
		$('.emailmember_erorr').html('');
		$('.no_telp_erorr').html('');
		
		var valid='';
		
	
		if($('.emailMember').val()=='')
		{
			$('.emailmember_erorr').html('kolom ini harus di isi');
			 valid='ada';	
		}
		
		var valid='';
		if($('.name').val()=='')
		{
			$('.name_erorr').html('kolom ini harus di isi');
			valid='ada';
		}
		if($('.email').val()=='')
		{
			$('.email_erorr').html('kolom ini harus di isi');
			valid='ada';
		}
		if($('.ktp_sim').val()=='')
		{
			$('.ktp_sim_erorr').html('kolom ini harus di isi');
			valid='ada';
		}
		
		if($('.alamat').val()=='')
		{
			$('.alamat_erorr').html('kolom ini harus di isi');
			valid='ada';
		}
		if($('.fb_id').val()=='')
		{
			$('.fb_id_erorr').html('kolom ini harus di isi');
			valid='ada';
		}
		if($('.twitter_id').val()=='')
		{
			$('.twitter_id_erorr').html('kolom ini harus di isi');
			valid='ada';
		}
		if($('.date_register').val()=='')
		{
			$('.date_register_erorr').html('kolom ini harus di isi');
			valid='ada';
		}
		if($('.chapter_id').val()=='')
		{
			$('.chapter_id_erorr').html('kolom ini harus di isi');
			valid='ada';
		}
		if($('.no_telp').val()=='')
		{
			$('.no_telp_erorr').html('kolom ini harus di isi');
			valid='ada';
		}
		
		
		if(valid)
		{
			return false;
		}
		else
		{
	
		vlidemail(valid)
		
		
			
	
			
		}
		
	})

	function vlidemail(valid)
	{
	var valid= valid;
	emailsplit = $('.emailMember').val().split(',');
	emailformat='';
	var emailSame='';
	var ix=0;
	var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,15})+$/; 
	if(emailformat=='' && emailSame=='')
		{
			if(emailsplit.length > 20 )
			{
				$('.emailmember_erorr').html('Maximal 20 Email Member');
				 valid='ada';	
				
			}
		}	
		//console.log(emailsplit);
		$.each(emailsplit,function(ind,value)
		{
			mailnya = value.trim();
			
			if(!mailnya.match(mailformat))  
			{  
			console.log('masuksini salah format');
				$('.emailmember_erorr').html(' format email salah (e.g. example@gmail.com)');
				
				valid='ada';
				emailformat='ada';
				//console.log(mailnya);
			} 
			else
			{
			
				$.ajax ({ 
					type	 : 'POST', 
					url	 :  basedomain+'membermanagement/checkEmail' , 
					data:{email:mailnya},
					dataType:'json',
					success	: function (result) 
						{
							++ix;
						
							if(result.status==1)
							{
								//console.log(emailSame);
								if(emailSame=='')
								{
									emailSame +=result.email;
									
								}
								else
								{
									emailSame +=','+result.email;
								}
								if(emailSame)
									{
										$('.emailmember_erorr').html('email <span class="emailsama" > '+emailSame+'</span> sudah terdaftar');
										valid='ada';
										
									}
							}
							//console.log(valid);
							if(emailsplit.length==ix)
							{
								if(valid)
								{
									console.log('masuk dah');
									return false;
									end;
								}else{
									 $('.submitnya').trigger('click'); 
								}
								
							}
						}
				});
				
			}
		});
		if(valid)
		{
			return false;
		}
		return false;
		
		

}
{/literal}
</script>
